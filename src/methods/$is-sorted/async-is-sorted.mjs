/* @macrome
 * @generated-from ./$is-sorted.js
 * This file is autogenerated. Please do not edit it directly.
 * When editing run `npx macrome watch` then change the file this is generated from.
 */
import { asyncIterableCurry } from '../../internal/async-iterable';
import defaultCompare from '../../internal/compare';

export async function asyncIsSorted(iterable, comparator = defaultCompare) {
  let a;
  let b;
  let iter;
  let done;

  try {
    iter = iterable[Symbol.asyncIterator]();

    ({ done, value: b } = await iter.next());

    while (!done) {
      a = b;
      ({ done, value: b } = await iter.next());

      if (!done && comparator(a, b) > 0) {
        return false;
      }
    }
    return true;
  } finally {
    if (!done && typeof iter.return === 'function') {
      iter.return();
    }
  }
}

export default asyncIterableCurry(asyncIsSorted, {
  reduces: true,
  minArgs: 0,
  maxArgs: 1,
});
